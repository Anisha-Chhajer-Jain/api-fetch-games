const newsData = {
            "status": "ok",
            "totalResults": 9037,
            "articles": [
                {
                    "source": { "id": null, "name": "ZDNet France" },
                    "author": "Guillaume Serries",
                    "title": "Cette nouvelle plateforme Linux vous permettra de mettre à jour votre prochaine voiture à la maison - dès 2027",
                    "description": "Toyota, Honda et Mazda mettent au point une nouvelle plateforme automobile open source qui permet de tout faire, du divertissement à la navigation, et qui pourrait même permettre la conduite autonome.",
                    "url": "https://www.zdnet.fr/actualites/cette-nouvelle-plateforme-linux-vous-permettra-de-mettre-a-jour-votre-prochaine-voiture-a-la-maison-des-2027-486254.htm",
                    "urlToImage": "https://www.zdnet.fr/wp-content/uploads/zdnet/2025/12/gettyimages-2234336210.webp",
                    "publishedAt": "2025-12-09T04:12:45Z",
                    "content": "A retenir sur cette nouvelle plateforme open source pour les voitures connectées\r\n\u003Cul\u003E\u003Cli\u003EUn changement radical d'architecture est en train de s'opérer dans les logiciels automobiles open source.\u003C/li… [+5645 chars]"
                },
                {
                    "source": { "id": null, "name": "Ferra.ru" },
                    "author": "Булат Кармак",
                    "title": "Робот-гуманоид Tesla Optimus упал и случайно раскрыл управление VR-оператором, а не ИИ",
                    "description": "На демонстрации Tesla в Майами произошёл неловкий, но показательный инцидент.",
                    "url": "https://www.ferra.ru/news/techlife/robot-gumanoid-tesla-optimus-upal-i-sluchaino-raskryl-upravlenie-vr-operatorom-a-ne-ii-08-12-2025.htm",
                    "urlToImage": "https://www.ferra.ru/imgs/2025/12/08/11/6936915/7b4ecea33b776d5e191eb0dce8dee88f89f6ef81.png",
                    "publishedAt": "2025-12-09T04:08:34Z",
                    "content": "- Optimus , . , : «», VR-.\r\n Optimus, , . , , .\r\n VR-, : , 1:1 .\r\n « », Tesla Optimus.\r\n , Optimus « » . «- AI»."
                },
                {
                    "source": { "id": null, "name": "Interfax.ru" },
                    "author": null,
                    "title": "Уолл-стрит умеренно снизилась в ожидании заседания Федрезерва",
                    "description": "Интерфакс: Американские фондовые индексы завершили в минусе торги в понедельник, все внимание инвесторов было направлено на последнее в этом году заседание Федеральной резервной системы.",
                    "url": "https://www.interfax.ru/world/1062113",
                    "urlToImage": "https://www.interfax.ru/aspimg/1062113.jpg",
                    "publishedAt": "2025-12-09T04:07:00Z",
                    "content": ". 9 . INTERFAX.RU - , .\r\n , 0,4% , - 0,3%. 0,3%, Trading Economics.\r\n ( PCE) 0,3% 2,8% , .\r\n PCE Core, , 0,2% 2,8% .\r\n 25 90%, CME FedWatch. .\r\n\" , \"\", \"\". , 1992 \", - Deutsche Bank.\r\n Warner Bros. D… [+471 chars]"
                },
                {
                    "source": { "id": null, "name": "Livedoor.com" },
                    "author": "GIGAZINE（ギガジン）",
                    "title": "テスラの人型ロボット・Optimusに「人間が遠隔操作しているのでは？」疑惑浮上、ヘッドセットを取るような動作の後に不審な転倒",
                    "description": "テスラの人型ロボット「Optimus」が、非常に不審な転倒をしてしまい、人間が遠隔操作しているのではないかと疑われています。Optimusには過去にも遠隔操作疑惑がかかっていました。Tesla Optimus robot takes a suspicious tumble in new demo | Electrekhttps://electrek.co/2025/12/07/tesla-optimus-robot-takes-suspicious-tumble-in-new-demo/テスラの開発している人型ロ…",
                    "url": "https://news.livedoor.com/article/detail/30168209/",
                    "urlToImage": "https://image.news.livedoor.com/newsimage/stf/2/6/26612_88_e9484573f0a83ca70b74f9cb9d4b2a68.jpg",
                    "publishedAt": "2025-12-09T04:02:00Z",
                    "content": "OptimusOptimus\r\nTesla Optimus robot takes a suspicious tumble in new demo | Electrek\r\nhttps://electrek.co/2025/12/07/tesla-optimus-robot-takes-suspicious-tumble-in-new-demo/\r\nOptimus2022102023122Opti… [+367 chars]"
                },
                {
                    "source": { "id": null, "name": "Lavozdegalicia.es" },
                    "author": "Fernando González Laxe",
                    "title": "La IA o la fiebre del oro",
                    "description": "La inteligencia artificial (IA) suscita tanto esperanzas de futuro como expectativas de transformación",
                    "url": "https://www.lavozdegalicia.es/noticia/opinion/2025/12/09/ia-fiebre-oro/0003_202512G9P13991.htm",
                    "urlToImage": "https://img.lavdg.com/sc/0Syl81DrS-rioNftn4ajZXVclaE=/1280x/2025/12/08/00121765211772856798296/Foto/iadinero.jpg",
                    "publishedAt": "2025-12-09T04:00:00Z",
                    "content": "La inteligencia artificial (IA) suscita tanto esperanzas de futuro como expectativas de transformación. En los últimos tiempos ha seducido a inversores y abducido a gobernantes. Sus discursos están l… [+4431 chars]"
                },
                {
                    "source": { "id": "business-insider", "name": "Business Insider" },
                    "author": "Dominick Reuter,Katherine Li",
                    "title": "Paramount's $108 billion bid for Warner Bros. Discovery is big — but not the biggest-ever hostile takeover attempted",
                    "description": "In seeking to buy Warner Brothers for $108 billion, Paramount is making one of the top ten largest hostile takeover bids in history.",
                    "url": "https://www.businessinsider.com/famous-hostile-takeover-attempt-examples",
                    "urlToImage": "https://i.insider.com/693762957ecd1d1da66327d6?width=1200&format=jpeg",
                    "publishedAt": "2025-12-09T03:34:12Z",
                    "content": "Paramount Skydance is seeking to buy Warner Bros. Discovery at $108.4 billion in a hostile takeover attempt.Dado Ruvic/Reuters\r\n\u003Cul\u003E\u003Cli\u003EParamount Skydance is seeking to buy Warner Bros. Discovery at … [+6089 chars]"
                },
                {
                    "source": { "id": null, "name": "Finance.ua" },
                    "author": "Finance.UA",
                    "title": "Tesla выпустила праздничное обновление 2025 года",
                    "description": "Tesla выпустила праздничное обновление 2025 с новыми функциями для навигации, персонализации, безопасности и развлечений.",
                    "url": "https://news.finance.ua/ru/tesla-vypustila-prazdnichnoe-obnovlenie-2025-goda",
                    "urlToImage": "https://finance-news-media.fra1.cdn.digitaloceanspaces.com/prod/9/4/94e6d1fcdd6cb0cd3893774a8282d9bd",
                    "publishedAt": "2025-12-09T02:43:00Z",
                    "content": "Tesla 2025 \r\n3D Supercharger « ». : «», «» «».\r\n , . (UWB) iPhone, Android-, Samsung Galaxy Google Pixel.\r\n\u003Cul\u003E\u003Cli\u003E / ;\u003C/li\u003E\u003Cli\u003E Spotify ;\u003C/li\u003E\u003Cli\u003E Rave Cave , ;\u003C/li\u003E\u003C/ul\u003E , Ctrl+Enter , ."
                },
                {
                    "source": { "id": null, "name": "Technews.tw" },
                    "author": "Chen Kobe",
                    "title": "美國補助退場，特斯拉年底拼業績促銷招式全梭了",
                    "description": "特斯拉今年銷量低迷，迎接 2025 總結算只剩最後一個月，美國市場可以說是把所有可用的促銷手段 all-in 了，只求最後成績不要太難看。 特斯拉在每一季的最後一個月，經常會端出一些促銷優惠，但今年的 12 月，他們可以說是毫無保留了。由於美國政府中止 7,500 美元的電動車退稅補助，再加上特斯拉...",
                    "url": "https://finance.technews.tw/2025/12/09/tesla-all-effort-for-sale-year-end/",
                    "urlToImage": "https://img.technews.tw/wp-content/uploads/2025/12/09103830/Model-Y-discount.png",
                    "publishedAt": "2025-12-09T02:38:54Z",
                    "content": "2025 all-in \r\n 12 7,500 Elon Musk\r\nFree 1,500  \r\n Model Y 72 2.5% Model 3 Model Y 2.99% 5% \r\n FSD FSD FSD\r\n 2 3,200 6 533 \r\n 2025 12 31 122 2024 178.9 56 49 \r\n 5% 2025 11 Luxgen \r\nTesla"
                },
                {
                    "source": { "id": null, "name": "Tass.ru" },
                    "author": null,
                    "title": "Илон Маск назвал еврокомиссаров ответственными за разрушение Европы",
                    "description": "Миллиардер ранее призвал Ирландию и другие страны выйти из ЕС",
                    "url": "https://tass.ru/mezhdunarodnaya-panorama/25851249",
                    "urlToImage": "https://cdn-storage-media.tass.ru/thumb/ru/mezhdunarodnaya-panorama/25851249?u=2025-12-09T02:34:36.541461",
                    "publishedAt": "2025-12-09T02:34:36Z",
                    "content": "-, 9 . //. , .\r\n\" \", - X.\r\n2 , Tesla SpaceX , , , \" \"."
                },
                {
                    "source": { "id": null, "name": "Cheezburger.com" },
                    "author": "Bar Mor Hazut, Bar Mor Hazut",
                    "title": "29-year-old woman cuts off jobless fiancé's access to her bank account after he buys a Tesla with her money, claiming it's a business investment: ‘I fell for it completely’",
                    "description": "Most couples who have been in a long-term, committed relationship know that there are times when one partner will have to financially support the other. The odds that both people will have an income for the entirety of the relationship are slim, but if they t…",
                    "url": "https://cheezburger.com/43550725/29-year-old-woman-cuts-off-jobless-fiancs-access-to-her-bank-account-after-he-buys-a-tesla-with-her",
                    "urlToImage": "https://i.chzbgr.com/thumb1200/43550725/hB5B94EC1/out-he-bought-a-tesla-with-her-money-claiming-its-a-business-investment-i-fell-for-it-completely",
                    "publishedAt": "2025-12-09T02:00:00Z",
                    "content": "Most couples who have been in a long-term, committed relationship know that there are times when one partner will have to financially support the other. The odds that both people will have an income … [+777 chars]"
                },
                {
                    "source": { "id": "the-times-of-india", "name": "The Times of India" },
                    "author": "Reuters",
                    "title": "US stocks end lower as investors wait for Fed rate decision",
                    "description": "Indian markets mirrored global trends as Wall Street closed lower, with investors anxiously awaiting the Federal Reserve's policy update. Hopes for a December rate cut persist, but uncertainty surrounds future moves. Treasury yields climbed, impacting equitie…",
                    "url": "https://economictimes.indiatimes.com/markets/stocks/news/us-stocks-end-lower-as-investors-wait-for-fed-rate-decision/articleshow/125856736.cms",
                    "urlToImage": "https://img.etimg.com/thumb/msid-125856755,width-1200,height-630,imgsize-81974,overlay-etmarkets/articleshow.jpg",
                    "publishedAt": "2025-12-09T01:51:48Z",
                    "content": "Wall Street's main indexes closed lower on Monday, with most S&amp;P 500 industry sectors in the red, while Treasury yields gained as investors waited nervously for the Federal Reserve monetary polic… [+3529 chars]"
                },
                {
                    "source": { "id": null, "name": "Yahoo Entertainment" },
                    "author": "三立新聞網",
                    "title": "年底出現搶訂潮　台灣特斯拉現貨全數秒殺",
                    "description": "台灣Tesla車市再創新高，Model 3與Model Y現貨全數完售，第四季交付量可望突破6,000輛，同比去年同期增幅達68%。由於每季全球配額有限，現在下訂的新車多需排入2026年生產批次，想要優先入手的準車主得提早行動。",
                    "url": "https://tw.news.yahoo.com/%E5%B9%B4%E5%BA%95%E5%87%BA%E7%8F%BE%E6%90%B6%E8%A8%82%E6%BD%AE-%E5%8F%B0%E7%81%A3%E7%89%B9%E6%96%AF%E6%8B%89%E7%8F%BE%E8%B2%A8%E5%85%A8%E6%95%B8%E7%A7%92%E6%AE%BA-090500617.html",
                    "urlToImage": "https://s.yimg.com/ny/api/res/1.2/yS.5Wu5qZsrdYuUO0TdVyA--/YXBwaWQ9aGlnaGxhbmRlcjt3PTEyMDA7aD02NzQ-/https://media.zenfs.com/ca/setn.com.tw/1431d708bc4876566e25a4d0d0a85357",
                    "publishedAt": "2025-12-09T01:05:00Z",
                    "content": "TeslaModel 3Model Y6,00068%2026\r\nModel YEuro NCAPTesla Vision Autopilot \r\nTesla Model 3 Model Y FSD/EAP \r\nTesla6,00015,000Tesla\r\n5,000GLB 5+7SUV560 MAZDASKODA2"
                },
            ]
        };

        // App State
        const state = {
            articles: [],
            filteredArticles: [],
            bookmarks: new Set(),
            currentCategory: 'all',
            currentSort: 'newest',
            searchQuery: '',
            lastUpdated: new Date()
        };

        // DOM Elements
        const elements = {
            newsGrid: document.getElementById('news-grid'),
            totalArticles: document.getElementById('total-articles'),
            todayArticles: document.getElementById('today-articles'),
            sourcesCount: document.getElementById('sources-count'),
            categoryFilter: document.getElementById('category-filter'),
            sortSelect: document.getElementById('sort-select'),
            searchBox: document.getElementById('search-box'),
            refreshBtn: document.getElementById('refresh-btn'),
            articleModal: document.getElementById('article-modal'),
            modalTitle: document.getElementById('modal-title'),
            modalBody: document.getElementById('modal-body'),
            modalClose: document.getElementById('modal-close'),
            lastUpdated: document.getElementById('last-updated'),
            footerArticleCount: document.getElementById('footer-article-count'),
            bookmarkCount: document.getElementById('bookmark-count')
        };

        // Initialize the app
        function init() {
            // Load articles from data
            state.articles = newsData.articles;
            state.filteredArticles = [...state.articles];
            
            // Set last updated time
            updateLastUpdated();
            
            // Render initial articles
            renderArticles();
            updateStats();
            
            // Load bookmarks from localStorage
            loadBookmarks();
            
            // Set up event listeners
            setupEventListeners();
        }

        // Update last updated time
        function updateLastUpdated() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            elements.lastUpdated.textContent = now.toLocaleDateString('en-US', options);
        }

        // Update statistics
        function updateStats() {
            // Total articles
            elements.totalArticles.textContent = newsData.totalResults;
            
            // Today's articles (published today)
            const today = new Date().toDateString();
            const todayArticlesCount = state.articles.filter(article => {
                const articleDate = new Date(article.publishedAt).toDateString();
                return articleDate === today;
            }).length;
            elements.todayArticles.textContent = todayArticlesCount;
            
            // Unique sources count
            const uniqueSources = new Set(state.articles.map(article => article.source.name));
            elements.sourcesCount.textContent = uniqueSources.size;
            
            // Footer stats
            elements.footerArticleCount.textContent = state.articles.length;
            elements.bookmarkCount.textContent = state.bookmarks.size;
        }

        // Render articles to the grid
        function renderArticles() {
            // Clear current grid
            elements.newsGrid.innerHTML = '';
            
            if (state.filteredArticles.length === 0) {
                elements.newsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #718096;">
                        <i class="fas fa-newspaper" style="font-size: 48px; margin-bottom: 20px;"></i>
                        <h3 style="font-size: 24px; margin-bottom: 10px;">No articles found</h3>
                        <p>Try adjusting your search or filter criteria</p>
                    </div>
                `;
                return;
            }
            
            // Render each article
            state.filteredArticles.forEach(article => {
                const articleCard = createArticleCard(article);
                elements.newsGrid.appendChild(articleCard);
            });
        }

        // Create an article card element
        function createArticleCard(article) {
            const card = document.createElement('div');
            card.className = 'news-card';
            card.dataset.id = article.url; // Use URL as unique ID
            
            // Determine category based on content
            const category = getArticleCategory(article);
            
            // Format date
            const publishedDate = new Date(article.publishedAt);
            const formattedDate = formatDate(publishedDate);
            
            // Check if bookmarked
            const isBookmarked = state.bookmarks.has(article.url);
            
            // Create card HTML
            card.innerHTML = `
                <img src="${article.urlToImage || 'https://via.placeholder.com/400x200?text=No+Image'}" alt="${article.title}" class="card-image" onerror="this.src='https://via.placeholder.com/400x200?text=No+Image'">
                <div class="card-content">
                    <div class="card-header">
                        <span class="card-category">${category}</span>
                        <span class="card-time"><i class="far fa-clock"></i> ${formattedDate}</span>
                    </div>
                    <h3 class="card-title">${article.title}</h3>
                    <p class="card-description">${article.description || 'No description available.'}</p>
                    <div class="card-footer">
                        <div class="card-source">
                            <i class="far fa-newspaper"></i>
                            <span>${article.source.name}</span>
                        </div>
                        <div class="card-actions">
                            <button class="card-btn bookmark ${isBookmarked ? 'active' : ''}" title="${isBookmarked ? 'Remove bookmark' : 'Bookmark'}">
                                <i class="${isBookmarked ? 'fas' : 'far'} fa-bookmark"></i>
                            </button>
                            <button class="card-btn read-more" title="Read more">
                                <i class="fas fa-external-link-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners to buttons
            const bookmarkBtn = card.querySelector('.bookmark');
            const readMoreBtn = card.querySelector('.read-more');
            
            bookmarkBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleBookmark(article.url, bookmarkBtn);
            });
            
            readMoreBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                openArticleModal(article);
            });
            
            // Make entire card clickable to open modal
            card.addEventListener('click', () => {
                openArticleModal(article);
            });
            
            return card;
        }

        // Get article category based on content
        function getArticleCategory(article) {
            const title = article.title.toLowerCase();
            const description = article.description ? article.description.toLowerCase() : '';
            const content = title + ' ' + description;
            
            if (content.includes('linux') || content.includes('robot') || content.includes('ai') || 
                content.includes('artificial intelligence') || content.includes('tech') || 
                content.includes('tesla') || content.includes('software')) {
                return 'Technology';
            } else if (content.includes('stock') || content.includes('market') || 
                       content.includes('investment') || content.includes('finance') || 
                       content.includes('dollar') || content.includes('fed')) {
                return 'Finance';
            } else if (content.includes('warner') || content.includes('paramount') || 
                       content.includes('xbox') || content.includes('entertainment')) {
                return 'Entertainment';
            } else if (content.includes('car') || content.includes('vehicle') || 
                       content.includes('automotive') || content.includes('tesla')) {
                return 'Automotive';
            } else if (content.includes('business') || content.includes('company') || 
                       content.includes('merger') || content.includes('takeover')) {
                return 'Business';
            } else if (content.includes('europe') || content.includes('russia') || 
                       content.includes('international') || content.includes('world')) {
                return 'International';
            }
            
            return 'General';
        }

        // Format date to relative time or specific date
        function formatDate(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / (1000 * 60));
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            
            if (diffMins < 60) {
                return `${diffMins} min ago`;
            } else if (diffHours < 24) {
                return `${diffHours} hour${diffHours !== 1 ? 's' : ''} ago`;
            } else if (diffDays < 7) {
                return `${diffDays} day${diffDays !== 1 ? 's' : ''} ago`;
            } else {
                return date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric',
                    year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined
                });
            }
        }

        // Toggle bookmark for an article
        function toggleBookmark(articleUrl, button) {
            if (state.bookmarks.has(articleUrl)) {
                state.bookmarks.delete(articleUrl);
                button.classList.remove('active');
                button.innerHTML = '<i class="far fa-bookmark"></i>';
                button.title = 'Bookmark';
            } else {
                state.bookmarks.add(articleUrl);
                button.classList.add('active');
                button.innerHTML = '<i class="fas fa-bookmark"></i>';
                button.title = 'Remove bookmark';
            }
            
            // Update bookmark count
            elements.bookmarkCount.textContent = state.bookmarks.size;
            
            // Save to localStorage
            saveBookmarks();
            
            // Show notification
            showNotification(state.bookmarks.has(articleUrl) ? 'Article bookmarked!' : 'Bookmark removed');
        }

        // Save bookmarks to localStorage
        function saveBookmarks() {
            const bookmarksArray = Array.from(state.bookmarks);
            localStorage.setItem('newsBookmarks', JSON.stringify(bookmarksArray));
        }

        // Load bookmarks from localStorage
        function loadBookmarks() {
            const savedBookmarks = localStorage.getItem('newsBookmarks');
            if (savedBookmarks) {
                const bookmarksArray = JSON.parse(savedBookmarks);
                state.bookmarks = new Set(bookmarksArray);
            }
        }

        // Open article modal
        function openArticleModal(article) {
            // Set modal title
            elements.modalTitle.textContent = article.title;
            
            // Set modal content
            elements.modalBody.innerHTML = `
                <div class="modal-source">
                    <span class="author"><strong>Source:</strong> ${article.source.name}</span>
                    <span>•</span>
                    <span><strong>Author:</strong> ${article.author || 'Unknown'}</span>
                    <span>•</span>
                    <span><strong>Published:</strong> ${new Date(article.publishedAt).toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })}</span>
                </div>
                ${article.urlToImage ? `<img src="${article.urlToImage}" alt="${article.title}" class="modal-image" onerror="this.style.display='none'">` : ''}
                <div class="modal-description">
                    <strong>Description:</strong> ${article.description || 'No description available.'}
                </div>
                <div class="modal-full-content">
                    <strong>Full Content:</strong> ${article.content ? article.content.substring(0, 1500) + '...' : 'No content available.'}
                </div>
                <div style="margin-top: 30px; text-align: center;">
                    <a href="${article.url}" target="_blank" style="background-color: #4299e1; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: 600; display: inline-block;">
                        <i class="fas fa-external-link-alt"></i> Read Full Article
                    </a>
                </div>
            `;
            
            // Show modal
            elements.articleModal.style.display = 'block';
            
            // Prevent scrolling on body
            document.body.style.overflow = 'hidden';
        }

        // Close article modal
        function closeArticleModal() {
            elements.articleModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Filter and sort articles based on current state
        function filterAndSortArticles() {
            let filtered = [...state.articles];
            
            // Apply category filter
            if (state.currentCategory !== 'all') {
                filtered = filtered.filter(article => {
                    const category = getArticleCategory(article);
                    return category.toLowerCase() === state.currentCategory.toLowerCase();
                });
            }
            
            // Apply search filter
            if (state.searchQuery.trim() !== '') {
                const query = state.searchQuery.toLowerCase().trim();
                filtered = filtered.filter(article => {
                    const title = article.title ? article.title.toLowerCase() : '';
                    const description = article.description ? article.description.toLowerCase() : '';
                    const content = article.content ? article.content.toLowerCase() : '';
                    const author = article.author ? article.author.toLowerCase() : '';
                    const source = article.source.name ? article.source.name.toLowerCase() : '';
                    
                    return title.includes(query) || 
                           description.includes(query) || 
                           content.includes(query) ||
                           author.includes(query) ||
                           source.includes(query);
                });
            }
            
            // Apply sorting
            filtered.sort((a, b) => {
                const dateA = new Date(a.publishedAt);
                const dateB = new Date(b.publishedAt);
                
                switch (state.currentSort) {
                    case 'newest':
                        return dateB - dateA;
                    case 'oldest':
                        return dateA - dateB;
                    case 'title':
                        return a.title.localeCompare(b.title);
                    case 'source':
                        return a.source.name.localeCompare(b.source.name);
                    default:
                        return dateB - dateA;
                }
            });
            
            state.filteredArticles = filtered;
            renderArticles();
        }

        // Show notification
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: #38a169;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1100;
                font-weight: 600;
                transform: translateX(120%);
                transition: transform 0.3s ease;
                max-width: 300px;
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 10);
            
            // Animate out and remove
            setTimeout(() => {
                notification.style.transform = 'translateX(120%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Category filter
            elements.categoryFilter.addEventListener('change', (e) => {
                state.currentCategory = e.target.value;
                filterAndSortArticles();
            });
            
            // Sort select
            elements.sortSelect.addEventListener('change', (e) => {
                state.currentSort = e.target.value;
                filterAndSortArticles();
            });
            
            // Search box
            elements.searchBox.addEventListener('input', (e) => {
                state.searchQuery = e.target.value;
                // Debounce the filter to avoid too many updates
                clearTimeout(window.searchTimeout);
                window.searchTimeout = setTimeout(() => {
                    filterAndSortArticles();
                }, 300);
            });
            
            // Refresh button
            elements.refreshBtn.addEventListener('click', () => {
                elements.refreshBtn.classList.add('refreshing');
                
                // Simulate API call
                setTimeout(() => {
                    // In a real app, this would fetch new data
                    updateLastUpdated();
                    showNotification('News feed refreshed!');
                    
                    elements.refreshBtn.classList.remove('refreshing');
                }, 1000);
            });
            
            // Modal close button
            elements.modalClose.addEventListener('click', closeArticleModal);
            
            // Close modal when clicking outside
            elements.articleModal.addEventListener('click', (e) => {
                if (e.target === elements.articleModal) {
                    closeArticleModal();
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && elements.articleModal.style.display === 'block') {
                    closeArticleModal();
                }
            });
            
            // Responsive adjustments for window resize
            window.addEventListener('resize', () => {
                // Re-render articles to adjust to new grid layout
                renderArticles();
            });
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);

